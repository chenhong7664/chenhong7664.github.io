---
layout: post
title: "DOM的一些方法"
date: 2019-11-22 
description: "DOM"

tag: JavaScript   DOM 笔记
---   
# JavaScript   DOM 笔记

### DOM简介

文档对象模型(Documebt Object Model,简称DOM)

1. DOM 把 文档 当做一个 对象 来看待

2. DOM 的顶级对象是document

3. DOM 只要学习的是操作页面元素
4. DOM 是 W3C 标准规范

### DOM树

- 文档: 一个页面就是一个文档, DOM中使用document表示
- 元素: 页面中所有标签都是元素, DOM中使用图element表示
- 节点: 网页中所有内容都是节点(标签、属性、文本、注释等), DOM中使用node表示

   DOM 把以上内容都看做是对象



### 获取元素

- document.getElementById('id') 根据ID获取,返回相对应的元素对象
- document.getElementsByTagName('标签名') 根据标签名获取,返回指定标签名的对象的伪数组



##### H5新增

- document.getElementsByClassName('类名') 根据类名获取, 返回伪数组
- document.querySelector('#id、.class') 根据选择器获取，返回指定选择器的第一个元素对象(选择器需要加符号 .class #id)
- document.querySelectorAll('#id、.class') 根据选择器获取,返回指定选择器所有的元素



##### 获取body、html元素

- document.body
- document.documentElement



### 事件

事件由三部分组成: 事件源、事件类型、事件处理程序  也称为事件三要素

##### 鼠标事件

鼠标事件|触发条件
--|--
onclick |鼠标点击事件
onmouseover |鼠标经过事件
onmouseout |鼠标离开事件
onfocus |获取焦点事件
onblur |失去焦点事件
onmousemove|鼠标移动触发
onmouseup|鼠标弹起触发
onmousedown|鼠标按下触发

##### 键盘事件

键盘事件|触发条件
--|--
onkeyup|某个键盘按键被松开时触发
onkeydown|某个键盘按键被按下时触发
onkeypress|某个键盘按键被按下时触发   但是它不识别功能建 比如 ctrl shift 箭头等

注意：

keydown 和 keypress 在文本框里面的特点：他们两个事件触发的时候，文字还没有落入文本框中

keyup 事件触发的时候，文字已经落入文本框里面了



### this

this 指向的是事件函数的调用者



### 操作元素

#### 修改元素内容

- innerText  修改元素内容（不识别html标签）

- innerHTML   修改元素内容（识别html标签） 

   可以获取元素里面的内容

   可以修改元素属性
   
   

#### 表单元素的属性操作

- input.value  修改value值
- this.disabled = true;  禁用点击的按钮 
- checked = true;  默认勾选 



#### 修改样式属性

##### style  行内样式操作

- style.backgroundColor  修改背景颜色
- style.width  修改宽度
- style.display = 'none';  隐藏元素
- style.display = 'block';  显示元素

style样式操作采取的是驼峰命名法，比如：fontSize、backgroundColor

如果样式比较少 或者 功能简单的情况下使用



##### class 类名样式操作

- className = '类名'  给元素添加类名

适合用于样式比较多 或者 功能复杂的情况下使用

会覆盖原先的类名,如果想要保留原先的类名,使用多类名添加:'类名1 类名2'

  

### 自定义属性操作

- getAttribute('属性')  获取自定义属性
- setAttribute('属性', '值')  设置自定义属性的值
- removeAttribute('属性')  删除自定义属性

 

##### H5自定义属性

H5规定自定义属性 data- 开头作为属性名并赋值

比如: \<div data-index="1"> \</div>



### 节点操作

元素节点 nodeType 为1

属性节点 nodeType 为2 

文本节点 nodeType 为3  (包含文字、空格、换行等)



##### 父子关系

- parentNode  获取父元素节点  ***
- childNodes  获取所有子节点（包含元素、文本节点等）
- children  获取所有的子元素节点  ***
- firstChild  获取第一个子节点（包含元素、文本节点等）
- lastChild  获取最后一个子节点（包含元素、文本节点等）
- firstElementChild  获取第一个子元素节点【IE8不支持】
- lastElementChild  获取最后一个元素子节点 【IE8不支持】



##### 兄弟关系

- nextSibling  获取下一个兄弟节点（包含元素、文本节点等）
- previousSibling  获取上一个兄弟节点（包含元素、文本节点等）
- nextElementSibling  获取下一个兄弟元素节点【IE8不支持】
- previousElementSibling  获取上一个兄弟元素节点【IE8不支持】



##### 创建节点

创建元素  --->  添加元素

- document.createElement('节点')  创建元素节点

- 父节点.appendChild('子节点')  追加元素,会追加到父节点的子节点列表的末尾
- 父节点.insertBefore(子节点,指定元素)  追加元素到制定元素的前边

 

##### 删除节点

- 父节点.removeChild('子节点')  删除父元素中的一个子节点



##### 阻止链接跳转

在href中写Javascript:;



##### 复制节点

浅拷贝,括号为空或者里面是false,只复制标点不复制里面的内容

- 父节点.子节点.cloneNode()  克隆节点

 深拷贝,括号为true,复制标签和里面的内容 

- 父节点.子节点.cloneNode(true)  克隆节点



#### 三种动态创建元素区别

- document.write()
- element.innerHTML
- document.createElement()

区别

1. document.write 是直接将内容写入页面的内容流, 但是文档流执行完毕 , 则它会导致页面全部重绘
2. innerHTML 是将内容写入摸个 DOM 节点, 不会导致页面全部重绘
3. innerHTML 创建多个元素效率更高(不要拼接字符串, 采取数组形式拼接), 结构稍微复杂
4. createElement() 创建多个元素效率稍低一点, 但是结构更清晰



 ### 事件高级

#### 注册事件(绑定事件)

注册事件有两种方式:传统方式和方法监听注册方式

##### 传统方式

1. 利用on开头的事件 onclick
2. 特点: 注册事件的唯一性
3. 同一个元素同一个事件只能设置一个处理函数, 最后注册是处理函数将会覆盖前面注册是处理函数

写法:  要注册的事件标签.onclick = function(){

​			}



##### 方法监听注册方式

1. addEventListener() 一个方法
2. IE8及之前的IE不支持,可使用arrachEvent()代替
3. 特点:同一个元素同一个事件可以注册多个事件处理程序
4. 按注册顺序依次执行
5. 里面的事件类型是字符串,加引号,而且不带on

写法(匿名函数): 要注册的事件标签.addEventListener('click', function() {

​								});

写法二: 要注册的事件标签.addEVentListrner('click', fn);

​				 function fn() {

​				};			

​	

IE8及之前的IE写法,事件类型也是字符串,而且加on

写法: 要注册的事件标签.attachEvent('onclick', function() {

​			});



#### 删除事件(解绑事件)

1. 传统方式删除事件

   ​	注册事件的标签.onclick = null;

2. 方法监听方式删除事件(不能是匿名函数)

   ​	 注册事件的标签.removeEventListener('click', fn函数名);
   

​    3.​ IE8及之前的IE方式删除事件(不能是匿名函数)

​			  注册事件的标签.detachEvent('onclick', fn函数名);



### DOM 事件流

事件发生时会在元素节点之间按照特定的顺序传播, 这个传播过程即 DOM 事件流

DOM 事件流分为3个阶段

1. 捕获阶段
2. 当前目标阶段
3. 冒泡阶段

注意

1. js 代码中只能执行捕获或者冒泡其中的一个阶段
2. onclick 和 attachEvent 只能得到冒泡阶段
3. addEventListener(type, listener[, useCapture]) 第三个参数如果是 true, 表示在事件捕获阶段调用事件处理程序; 如果是 false (不写默认就是 false ), 表示在事件冒泡阶段调用事件处理程序
4. 实际开发中很少使用事件捕获, 更关注事件冒泡
5. 有些事件是没有冒泡的, 比如 onblur、onfocus、onmouseenter、onmouseleave



### 事件对象

event 或 e

1. event 对象代表事件的状态，比如键盘按键的状态、鼠标的位置、鼠标按钮的状态

2. 事件发生后，跟事件相关的一系列信息数据的集合都放到这个对象里面，这个对象就是事件对象event， 它有很多属性和方法

3. 这个 event 是个形参，系统帮我们设定为事件对象，不需要传递实参过去

4. 当注册事件时，event 对象就会被系统自动穿件，并依次传递给事件处理函数

#### 事件对象的兼容性方案

1. 标准浏览器是浏览器给方法传递的参数，只需要定义形参 e 就可以获取到
2. 在IE8及之前的IE中，浏览器不会给方法传递参数，如果需要的话，需要到 window.event 中获取查找

解决：

e = e || eindow.event；



#### 事件对象的常见属性和方法

事件对象属性方法|说明
--|--
e.target|返回触发事件的对象    标准
e.srcElement|返回触发事件的对象    非标准 ie6-8使用
e.type|返回事件的类型  比如click mouseover  不带on
e.cancelBubble|该属性阻止冒泡  非标准 ie6-8使用
e.returnValue|该属性 阻止默认事件  非标准 ie6-8使用 比如不让链接跳转
e.preventDefault()|该方法 阻止默认事件 标准 比如不让链接跳转
e.stopPropagation()|阻止冒泡 标准
return false|传统方式阻止默认事件



### 事件委托

##### 事件委托的原理

不是每个子节点单独设置事件监听器， 而是事件监听器设置在其父节点上，然后利用冒泡原理影响设置每个子节点

##### 作用

只操作了一次 DOM，提高了程序的性能



### 鼠标事件对象

event对象代表事件的状态，跟事件相关的一系列信息的集合，主要是用鼠标事件对象 MouseEvent 和键盘事件对象 KeyboardEvent

鼠标事件对象|说明
--|--
e.clientX|返回鼠标相对于浏览器窗口可视区的 X 坐标
e.clientY|返回鼠标相对于浏览器窗口可视区的 Y 坐标
e.pageX|返回鼠标相对于文档页面的 X 坐标 IE9+ 支持
e.pageY|返回鼠标相对于文档页面的 Y 坐标 IE9+ 支持
e.screenX|返回鼠标相对于电脑屏幕的 X 坐标
e.screenY|返回鼠标相对于电脑屏幕的 Y 坐标



### 键盘事件对象

keyCode

键盘事件对象属性|说明
--|--
keyCode|返回该键的 ASCII 值

keyup 和 keydown 事件不区分字母大小写  a 和 A 得到的都是65 

keypress 事件区分字母大小写

 



