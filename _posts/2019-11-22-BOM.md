---
layout: post
title: "BOM"
date: 2019-11-22 
description: "BOM笔记"

tag: JavaScript   BOM 
---   

# JavaScript   BOM  笔记

### BOM 简述

BOM（Browser Object Model）即浏览器对象模型，它提供了独立于内容而于浏览器窗口进行交互的对象，其核心对象是 window

BOM 由一系列相关的对象构成，并且每个对象都提供了很多方法于属性

BOM 缺乏标准，javaScript 语法的标准化阻止是 ECMA，DOM的标准化组织是 W3C，BOM 最初是 Netscape 浏览器标准的一部分

1. BOM 把 浏览器 当做一个 对象 看待

2. BOM 的顶级对象是window

3. BOM 学习的是浏览器窗口交互的一些对象



### BOM 的构成

window 对象是浏览器的顶级对象，它具有双重角色

1. 它是 JS 访问浏览器窗口的一个接口
2. 它是一个全局变量，定义在全局作用域中的变量、函数都会变成 window 对象的属性和方法

   在调用的时候可以省略 window



### window 对象的常见事件

#### 窗口加载事件

- window.onload 是窗口（页面）加载事件，当文档内容完全加载完成会触发该事件（包括图像、脚本文件、CSS文件等），就调用的处理函数
  1. 可以把JS代码写到页面元素的上方，因为 onload 是等页面内容全部加载完毕
  2. 传统注册事件方式只能写一次，如果有多个，会以最后一个 window.onload 为准
  3. 如果使用 addEventListener 则没有限制

 

- DOMContentLoaded 事件触发时，仅当 DOM 加载完成，不包括样式表、图片等等
  1. ie9以上才支持
  2. 如果页面的图片很多的话，从用户访问到 onload 触发可能需要较长的事件，交互效果就不能实现，此时用 DOMContentLoaded 事件比较合适



#### 调整窗口大小事件

window.onresize  是调整窗口大小加载事件，当触发时就调用的处理函数

1. 只要窗口大小发生像素变化，就会触发这个事件

window.innerWidth  当前屏幕的宽度



### 定时器

#### 两种定时器

##### setTimeout 定时器

- setTimeout(回调函数， 延时时间);   设置一个定时器（只执行一次回调函数）
- clearTimeout(定时器的名字); 清除定时器

 

##### setInterval 定时器

- setInterval(回调函数， 延时时间);  设置一个定时器，重复调用一个函数，每隔这个时间，就去调用一次回调函数
-  clearInterval(定时器的名字); 清除定时器



1. 延时时间单位是毫秒，可以省略，如果省略默认的是0
2. 调用函数可以写函数，还可以写函数名
3. 页面中可能会出现多个定时器，设置变量
4. 定时器和清除定时器如果不在一个函数体里，设置全局变量，var timer = null；//全局变量  null是一个空对象



### this

this 的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定 this 到底指向谁，一般情况下 this 的最终指向的是那个调用它的对象



### 执行机制

#### 同步

前一个任务结束后再执行后一个任务，程序的执行顺序与任务的排列顺序是一致的、同步的

#### 异步

多线程，同时执行多个任务



#### 同步任务

同步任务都在主线程上执行，形成一个执行栈

#### 异步任务

JS 的异步是通过回调函数实现的，一般而言，异步任务有一下三种类型

1. 普通事件 如 click、resize等
2. 资源加载 如 ；load、error等
3. 定时器，包括 serInterval、serTimeout等



#### 执行机制

1.  先执行执行栈中的同步任务
2. 异步任务（回调函数）放入任务队列中
3. 一旦执行栈中的所有同步任务执行完毕，系统就会按次序读取任务队列中的异步任务，于是被读取的异步任务结束等待状态，进入执行栈，开始执行



由于主线程不断地重复获得任务、执行任务、再获取任务、再执行，所以这种机制被称为事件循环（event loop）



### location 对象

window 对象提供一个 location 属性用于获取或设置窗体的 URL，并且可以用于解析 URL，这个属性返回的是一个对象，所以我们将这个属性也称为 location 对象

location 对象属性|返回值
--|--
location.href|获取或者设置 整个 URL 地址
location.host|返回主机（域名）
location.port|返回端口号 如果未写返回 空字符串
location.pathname|返回路径
location.search|返回参数
location.hash|返回片段 #后面内容 常见于链接 锚点



### history 对象

window 对象提供了一个 history 对象，与浏览器历史记录进行交互，该对象包含用户（在浏览器窗口中）访问过的 URL

history对象方法|作用
--|--
back()|后退功能
forward()|前进功能
go(参数)|前进后退功能 参数如果是 1 前进1个页面，如果是-1 后退1个页面



### navigator 对象 （了解）

navigator 对象包含有关浏览器的信息，它有很多属性，最常用的是 userAgent，该属性可以返回由客户机发送服务器的 user-agent 头部的值

































